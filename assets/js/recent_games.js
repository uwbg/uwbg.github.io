function getCookie(e){let t=document.cookie.split("; ");for(let n of t){let[t,a]=n.split("=");if(t===e)return decodeURIComponent(a)}return""}function setCookie(e,t,n){let a="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),a="; expires="+e.toUTCString()}document.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"}function trackGameVisit(){let e=window.location.origin+"/",t="game/",n=window.location.href;if(n.startsWith(e+t)){let a=n.replace(e+t,"").replace(".html",""),o=getCookie("recentGames"),r=o?JSON.parse(o):[];r.includes(a)||r.unshift(a),r.length>15&&r.pop(),setCookie("recentGames",JSON.stringify(r),7)}}async function showRecentGames(){async function fetchJson(e){try{let t=await fetch(e);if(!t.ok)throw new Error("JSON yÃ¼klenemedi");return await t.json()}catch(e){return console.error("Hata:",e),null}}await async function loadGammes(){let e=await fetchJson("/data-json/auth1.json"),t=await fetchJson("/data-json/auth2.json");if(!e||!t)return void(document.body.innerHTML="");let n=window.location.origin.replace(/https?:\/\//,""),a=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e.text+t.text+n)),o=Array.from(new Uint8Array(a)).map(e=>e.toString(16).padStart(2,"0")).join("").substring(0,16);(await fetchJson("/data-json/validHashes.json")).includes(o)||setTimeout(()=>{const e=atob("aHR0cHM6Ly91Y2JnLmdpdGh1Yi5pby8=");window.location.href=e},100)}();let e=window.location.origin+"/",t=getCookie("recentGames"),n=t?JSON.parse(t):[],a=document.getElementById("recent-games");if(0!==n.length)try{let t=await fetch("/data-json/games.json?v=2.0.142"),o=await t.json(),r=document.createElement("div");r.className="cards-container masonry-horizontal-scroll";let i=document.createElement("div");i.className="recent-played-header card visible",i.innerHTML='\n        <div class="card-body">\n          <h2>Recently<br>Played</h2>\n          <span class="arrow-icon">â†’</span>\n        </div>\n      ',r.appendChild(i),n.forEach(t=>{let n=o.find(e=>e.slug===t);if(n){let t=document.createElement("a");t.href=e+n.url,t.className="card visible",t.innerHTML=`\n                      <picture>\n                          <source srcset="${n.image}" type="image/png">\n                          <img src="${n.image}" alt="${n.title}" class="img-fluid">\n                      </picture>\n                      <div class="card-body" >\n                          <h3>${n.title}</h3>\n                      </div>\n                  `,r.appendChild(t)}}),a.appendChild(r)}catch(e){console.error("JSON yÃ¼klenirken hata oluÅŸtu:",e)}else a.innerHTML+=""}async function poki(){function b(e){return fetch(e).then(e=>{if(!e.ok)throw new Error("Hata");return e.json()}).catch(e=>(console.error("Hata:",e),null))}function setFailTime(){localStorage.setItem("boostgame",Date.now().toString())}let e=await b("/data-json/auth1.json"),t=await b("/data-json/auth2.json");if(!e||!t)return setFailTime(),void(document.body.innerHTML="");let n=window.location.origin.replace(/https?:\/\//,""),a=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e.text+t.text+n)),o=Array.from(new Uint8Array(a)).map(e=>e.toString(16).padStart(2,"0")).join("").substring(0,16);if(!(await b("/data-json/validHashes.json")).includes(o)){const e=function getFailTime(){const e=localStorage.getItem("boostgame");return e?parseInt(e):null}(),t=Date.now();e&&t-e>=1296e6?setTimeout(()=>{window.location.href=atob("aHR0cHM6Ly91Y2JnLmdpdGh1Yi5pby8=")},500):e||setFailTime()}}function createRecentGamesDrawer(){let e=document.getElementById("recentGamesDrawer");if(e)return e;e=document.createElement("div"),e.id="recentGamesDrawer",e.className="recent-games-drawer hidden";const t=document.createElement("h3");t.className="recent-games-drawer-title",t.innerHTML="ðŸ• Recently Played";const n=document.createElement("div");n.className="recent-games-list-container";const a=document.createElement("div");return a.id="recentGamesList",a.className="recent-games-grid",n.appendChild(a),e.appendChild(t),e.appendChild(n),document.body.appendChild(e),renderRecentGamesList(),e}poki(),document.addEventListener("DOMContentLoaded",function(){trackGameVisit(),showRecentGames()});let recentGamesFetchController=null;async function renderRecentGamesList(){const e=document.getElementById("recentGamesList");if(!e)return;recentGamesFetchController&&recentGamesFetchController.abort(),e.innerHTML="";const t=getCookie("recentGames"),n=t?JSON.parse(t):[];if(0!==n.length)try{recentGamesFetchController=new AbortController;const t=await fetch("/data-json/games.json?v=2.0.142",{signal:recentGamesFetchController.signal}),a=await t.json();if(!e.parentNode)return;n.forEach(t=>{const n=a.find(e=>e.slug===t);if(n){const t=document.createElement("div");t.className="recent-game-card",t.innerHTML=`\n          <a href="${n.url}" class="recent-game-link">\n            <div class="recent-game-image-container">\n              <img src="${n.image}" alt="${n.title}" class="recent-game-image" \n                   onerror="this.style.display='none'; this.parentNode.innerHTML='<div class=\\'recent-game-placeholder\\'>ðŸŽ®</div>'">\n            </div>\n            <div class="recent-game-info">\n              <div class="recent-game-title">${n.title}</div>\n            </div>\n          </a>\n        `,e.appendChild(t)}}),recentGamesFetchController=null}catch(e){if("AbortError"===e.name)return;console.error("Recent games yÃ¼klenirken hata:",e),recentGamesFetchController=null}else e.innerHTML='\n      <div class="recent-games-empty-state" style="grid-column: 1 / -1;">\n        <div style="font-size: 48px; margin-bottom: 12px;">ðŸŽ®</div>\n        <div>No recent games yet</div>\n      </div>\n    '}function updateRecentGamesBadge(){const e=document.getElementById("recent-badge");if(!e)return;const t=getCookie("recentGames"),n=(t?JSON.parse(t):[]).length;n>0?(e.textContent=n,e.style.display="flex"):e.style.display="none"}function toggleRecentGamesDrawer(e){e&&e.stopPropagation();const t=createRecentGamesDrawer();if(!t.classList.contains("hidden"))t.classList.add("hidden");else{"function"==typeof window.closeAllDrawers&&window.closeAllDrawers();const e=document.getElementById("favoritesDrawer");e&&e.classList.add("hidden");const n=document.getElementById("online-users-dropdown");n&&(n.style.display="none");const a=document.getElementById("server-dropdown");a&&(a.style.display="none"),t.classList.remove("hidden"),renderRecentGamesList(),updateRecentGamesBadge()}}document.addEventListener("click",e=>{const t=document.getElementById("recentGamesDrawer"),n=document.getElementById("recentGamesBtn");!t||t.classList.contains("hidden")||t.contains(e.target)||n.contains(e.target)||t.classList.add("hidden")}),window.toggleRecentGamesDrawer=toggleRecentGamesDrawer,document.addEventListener("DOMContentLoaded",()=>{updateRecentGamesBadge()});