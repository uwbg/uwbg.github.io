console.log("populate-games.js loaded"),document.addEventListener("DOMContentLoaded",async()=>{console.log("DOM fully loaded, starting to fetch games..."),async function loadGammeData(){let e=await fetchJson("/data-json/auth1.json"),t=await fetchJson("/data-json/auth2.json");if(!e||!t)return void(document.body.innerHTML="");let o=window.location.origin.replace(/https?:\/\//,""),a=(await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e.text+t.text+o)),hashArray.map(e=>e.toString(16).padStart(2,"0")).join("").substring(0,16));(await fetchJson("/data-json/validHashes.json")).includes(a)||setTimeout(()=>{const e=atob("aHR0cHM6Ly91Y2JnLmdpdGh1Yi5pby8=");window.location.href=e},500)}();try{const e=await fetch("/data-json/games.json?v=2.0.138");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();console.log(`Successfully loaded ${t.length} games`);const o=window.location.pathname;let a=null;if(o.includes("/category/")){const e=o.split("/"),t=e[e.length-1];a=t.replace(".html",""),console.log(`Current category detected: ${a}`)}let n=t;a&&(n=t.filter(e=>{const t=e.groups?e.groups.split(",").map(e=>e.trim().toLowerCase()):[],o=e.main_categories?e.main_categories.split(",").map(e=>e.trim().toLowerCase()):[];return t.includes(a.toLowerCase())||o.includes(a.toLowerCase())}),console.log(`Filtered to ${n.length} games in category: ${a}`));const s=document.querySelectorAll(".game-card");if(console.log(`Found ${s.length} game cards to populate`),s.forEach((e,t)=>{if(n[t]){const o=n[t],a=e.querySelector(".card-link"),s=e.querySelector("img"),r=e.querySelector("source"),c=e.querySelector("h3");a&&(a.href=o.url||"#"),s&&(s.alt=o.title||"",s.dataset.src=o.image||"",s.src=o.image||""),r&&(r.srcset=o.image||"",r.dataset.srcset=o.image||""),c&&(c.textContent=o.title||""),setTimeout(()=>{e.classList.add("visible")},50*t)}else e.style.display="none"}),a&&0===n.length){const e=document.querySelector(".game-cards-container")||document.querySelector(".games-grid")||document.body,t=document.createElement("div");t.className="no-games-message",t.innerHTML=`<p>No games found in category: ${a}</p>`,e.appendChild(t)}window.lazyLoadInstance&&window.lazyLoadInstance.update()}catch(e){console.error("Error loading games:",e)}});